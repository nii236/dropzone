<!DOCTYPE html>
<html lang="en">

<head>
    <title>Photo Upload</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/css/app.css">
    <link rel="stylesheet" href="/static/css/bulma.min.css">
    <link rel="stylesheet" href="/static/css/dropzone.css">
    <script src="/static/js/dropzone.js"></script>

</head>

<body>
    <div class="hero">
        <div class="hero-body app-hero">
            <h1 class="title">
                John and Tenita's Wedding
            </h1>
            <h2 class="subtitle">
                Welcome to the Dropzone
            </h2>

        </div>
    </div>

    <div class="container">
        <div class="columns is-multiline">
            <div class="column is-12">
                <form action="/" method="post" class="dropzone" id="my-dz-image">
                    <div class="dz-message needsclick">
                        <div class="needsclick upload-container">
                            <img class="needsclick upload-icon" src="/static/svg/camera-retro.svg" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="column is-12">
                <div class="columns is-flex is-multiline" id="previews-container" />
            </div>
            <div class="column is-12">
                <div class="tile is-ancestor">
                    <div class="tile is-parent is-vertical is-4">
                        {{range .First}}
                        <div class="tile is-gapless" style="flex-grow: 0">
                            <a href="{{.}}">
                                <img src="{{.}}" />
                            </a>
                        </div>
                        {{end}}
                    </div>
                    <div class="tile is-parent is-vertical is-4">
                        {{range .Second}}
                        <div class="tile" style="flex-grow: 0">
                            <a href="{{.}}">
                                <img src="{{.}}" />
                            </a>
                        </div>
                        {{end}}
                    </div>
                    <div class="tile is-parent is-vertical is-4">
                        {{range .Third}}
                        <div class="tile" style="flex-grow: 0">
                            <a href="{{.}}">
                                <img src="{{.}}" />
                            </a>
                        </div>
                        {{end}}
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div id="tpl-org">

        <div class="column is-1-desktop is-3-mobile is-2-tablet upload-item">
            <img data-dz-thumbnail />
            <div class="dz-progress">
                <div class="dz-upload" data-dz-uploadprogress></div>
            </div>
            <div class="dz-size" data-dz-size></div>
            <div class="dz-success-mark"><span>✔</span></div>
            <div class="dz-error-mark"><span>✘</span></div>
        </div>
    </div>
</body>
<script>
    const previewsContainer = document.getElementById("previews-container")

    tpl = document
        .querySelector('#tpl-org')
        .innerHTML
    Dropzone.autoDiscover = false;

    Dropzone.options.myDzImage = {
        previewsContainer: previewsContainer,
        previewTemplate: tpl,
        clickable: true,
        acceptedFiles: "image/*"
    };
    dzImage = new Dropzone('#my-dz-image');
</script>

</html>